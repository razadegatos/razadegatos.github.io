HashOver.prototype.init=function(t){var e=this,n=Date.now(),s=this.getMainElement(t),i=["onclick","onsubmit"],o=window.location.href.split("#")[0],a=window.location.hash.substring(1);function m(t){e.elementExists(t,function(t){t.scrollIntoView({behavior:"smooth",block:"start",inline:"start"})},!0)}function l(){!1!==e.setup["collapses-comments"]?!1===e.elementExists(a,function(t){return!1===e.classes.contains(t,"hashover-hidden")&&(m(a),!0)},!0)&&e.showMoreComments(e.instance["more-link"],function(){m(a)}):m(a)}function r(){a.match(/comments|hashover/)&&m(a),a.match(/hashover-c[0-9]+r*/)&&(!1!==e.setup["collapses-interface"]?e.showInterface(l):l()),""!==e.getElement("message").textContent&&e.showMessage()}function c(){setTimeout(r,500)}this.optionalMethod("appendCSS",[t]),0!==this.instance["total-count"]&&(this.elementExists("comment-count",function(t){t.textContent=e.instance["total-count"]}),this.optionalMethod("appendRSS")),"insertAdjacentHTML"in s?(s.textContent="",s.insertAdjacentHTML("beforeend",this.instance["initial-html"])):s.innerHTML=this.instance["initial-html"],this.instance["main-element"]=s;var h=this.getElement("sort-section");this.instance["sort-section"]=h,this.elementExists("top-comments",function(t){void 0!==e.instance.comments.popular[0]&&e.parseAll(e.instance.comments.popular,t,!1,!0)});var p=this.instance.comments.primary;!1!==this.setup["collapses-comments"]&&!1!==this.setup["uses-ajax"]||(p=this.sortComments(p)),this.htmlTime=this.parseAll(p,h,this.setup["collapses-comments"]),this.optionalMethod("showInterfaceLink"),this.optionalMethod("showMoreLink"),this.formattingOnclick("main");var u=this.getElement("post-button"),d=this.getElement("form");if(this.duplicateProperties(u,i,function(){return e.postComment(d,u,"main")}),!1!==this.setup["allows-login"]&&!0!==this.setup["user-is-logged-in"]){var f=this.getElement("login-button");this.duplicateProperties(f,i,function(){return e.validateComment(d,"main",null,!0)})}if(this.elementExists("sort-select",function(t){t.onchange=function(){if(!1!==e.setup["collapses-comments"]){var n=e.getElement("sort");e.loadAllComments(n,function(){var n=!e.instance["showing-more"];e.sortPrimary(t.value,n),e.reappendMoreLink()},!1)}else e.sortPrimary(t.value)}}),o.match(/hashover-(reply|edit)=/)){var v=o.replace(/.*?hashover-(edit|reply)=(c[0-9r\-pop]+).*?/,"$2"),w=function(){if(o.match("hashover-reply="))e.replyToComment(v),m(a);else{var t=v.match("-pop"),n=e.instance.comments[t?"popular":"primary"],s=e.permalinkComment(v,n);e.editComment(s,function(){m(a)})}};!1!==e.setup["collapses-comments"]?this.showMoreComments(this.instance["more-link"],w):w()}this.execTime=Math.abs(Date.now()-n-this.htmlTime),console.log(this.strings.sprintf("HashOver: front-end %d ms, HTML %d ms",[this.execTime,this.htmlTime])),window.addEventListener?window.addEventListener("load",c,!1):window.attachEvent("onload",c),c()};