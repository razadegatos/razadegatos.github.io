HashOver.prototype.sortComments=function(e,t){t=t||this.setup["default-sorting"];var r=this.setup["default-name"];function s(e,t){return t.timestamp!==e.timestamp?t.timestamp-e.timestamp:1}function n(e){return(e.likes||0)-(e.dislikes||0)}function i(e){return e.replies?e.replies.length:0}function o(e,t){var r=0;if(void 0!==e.replies)for(var s=0,n=e.replies.length;s<n;s++)r+=o(e.replies[s],t);return r+=t(e)}function a(e,t){var s=(e.name||r).toLowerCase(),n=(t.name||r).toLowerCase();return(s="@"===s.charAt(0)?s.slice(1):s)!==(n="@"===n.charAt(0)?n.slice(1):n)?s>n?1:-1:0}switch(t){case"descending":return this.getAllComments(e).reverse();case"by-date":return this.getAllComments(e).sort(s);case"by-likes":return this.getAllComments(e).sort(function(e,t){return n(t)-n(e)});case"by-replies":return this.cloneObject(e).sort(function(e,t){return i(t)-i(e)});case"by-discussion":return this.cloneObject(e).sort(function(e,t){var r=o(e,i);return o(t,i)-r});case"by-popularity":return this.cloneObject(e).sort(function(e,t){var r=o(e,n);return o(t,n)-r});case"by-name":return this.getAllComments(e).sort(a);case"threaded-descending":return this.cloneObject(e).reverse();case"threaded-by-date":return this.cloneObject(e).sort(s);case"threaded-by-likes":return this.cloneObject(e).sort(function(e,t){return n(t)-n(e)});case"threaded-by-name":return this.cloneObject(e).sort(a)}return e},HashOver.prototype.sortPrimary=function(e,t){var r=this.instance["sort-section"],s=Date.now(),n=this.sortComments(this.instance.comments.primary,e);!0===t&&(this.instance.collapseLimit=0);var i=Date.now()-s,o=this.parseAll(n,r,t);console.log(this.strings.sprintf("HashOver: sorting %d ms, HTML %d ms",[i,o]))};