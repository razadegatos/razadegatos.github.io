<?php namespace HashOver;chdir(realpath('../'));require('backend/javascript-setup.php');try{$setup=new Setup('javascript');$setup->apiCheck('latest');$setup->setupRemoteAccess();$statistics=new Statistics('javascript');$statistics->executionStart();$javascript=new JavaScriptBuild('api/frontends/latest');$javascript->registerFile('constructor.js');$javascript->changeDirectory('frontend');$javascript->registerFile('script.js');$javascript->registerFile('getclienttime.js');$javascript->registerFile('backendpath.js',array('dependencies'=>array('rootpath.js')));$javascript->registerFile('onready.js');$javascript->registerFile('prefix.js');$javascript->registerFile('createelement.js');$javascript->registerFile('classes.js');$javascript->registerFile('getmainelement.js');$javascript->registerFile('displayerror.js');$javascript->registerFile('ajax.js');$javascript->registerFile('regex.js');$javascript->registerFile('eoltrim.js');$javascript->registerFile('permalinks.js');$javascript->registerFile('markdown.js',array('include'=>$setup->usesMarkdown));$javascript->registerFile('strings.js');$javascript->registerFile('optionalmethod.js');$javascript->registerFile('parsecomment.js');$javascript->registerFile('embedimage.js',array('include'=>$setup->allowsImages,'dependencies'=>array('openembeddedimage.js')));$javascript->registerFile('appendcss.js',array('include'=>$setup->appendsCss));$javascript->changeDirectory('api/frontends/latest');$javascript->registerFile('addratings.js',array('include'=>($setup->allowsLikes or $setup->allowsDislikes)));$javascript->registerFile('addcontrols.js');$javascript->registerFile('init.js');$javascript->registerFile('instantiate.js',array('include'=>!isset($_GET['nodefault'])));$output=$javascript->build($setup->minifiesJavascript,$setup->minifyLevel);echo $output,PHP_EOL;echo $statistics->executionEnd();}catch(\Exception $error){echo Misc::displayException($error,'javascript');}