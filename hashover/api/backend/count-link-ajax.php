<?php namespace HashOver;chdir(realpath('../../'));if(isset($_GET['jsonp'])){require('backend/javascript-setup.php');}else{require('backend/json-setup.php');}try{$hashover=new \HashOver('json');$hashover->setup->refererCheck();$hashover->setup->setPageURL('request');$hashover->setup->loadFrontendSettings();$hashover->initiate();$hashover->finalize();$data=array('primary-count'=>$hashover->thread->primaryCount-1,'total-count'=>$hashover->thread->totalCount-1);if($hashover->thread->totalCount>1){$data['link-text']=$hashover->getCommentCount();}else{$data['link-text']=$hashover->locale->text['post-button'];}$hashover->statistics->executionEnd();$data['statistics']=array('execution-time'=>$hashover->statistics->executionTime,'script-memory'=>$hashover->statistics->scriptMemory,'system-memory'=>$hashover->statistics->systemMemory);echo Misc::jsonData($data);}catch(\Exception $error){echo Misc::displayException($error,'json');}